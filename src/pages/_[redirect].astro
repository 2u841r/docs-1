---
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
	// get english pages that moved from `/` to `/en/`
	const englishPages = await getCollection('docs', ({id}) => {
		return id.startsWith('en');
	});

	return englishPages.map((page) => ({
		params: {
			redirect: page.slug.replace('en/', ''),
		},
		props: {
			englishSlug: page.slug,
		},
	}));
}
---

<meta http-equiv="refresh" content={`0;url=/docs${Astro.props.englishSlug}`} />
