---
title: Tutorial - Embedded SPA
description: >-
  Embed a Create React App directly in your Astro site.
i18nReady: true
---
import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro';
import Box from '~/components/tutorial/Box.astro';
import MultipleChoice from '~/components/tutorial/MultipleChoice.astro';
import Option from '~/components/tutorial/Option.astro';
import Spoiler from '~/components/Spoiler.astro';
import PreCheck from '~/components/tutorial/PreCheck.astro';
import FileTree from '~/components/FileTree.astro'


A **Single Page Application (SPA)** is ....

## Prerequisites

You will need **an existing Create-React-App project**. This tutorial uses the [Remix Run basic React Router Example](https://github.com/remix-run/react-router/tree/dev/examples). You can instead follow these steps with your own CRA project, but you will need to adjust the instructions for your codebase.

We recommend using this sample project to complete this short tutorial first. Then, you can use what you have learned to create view transitions in your own project.


## React Router Example Code

In the [Remix Run basic React Router Example](https://github.com/remix-run/react-router/tree/dev/examples), a single HTML file runs a script to render a React app to the page.

The Astro `index` page, located at `src/pages/index.astro` can perform the same function. However, Astro can render React components directly in their tempating, including an `<App />` component. You will slightly modify the React Router example code to use Astro's component-based design and embed an entire React app directly in an Astro project.

## MPA vs SPA

Maybe write stuff here about how Astro itself is an MPA, and index is just one of them. In Astro, it's possible to have an app "on one page", but also have entirely other pages. The whole thing doesn't have to be taken up by the app. The App is just an Island.

<Box icon="question-mark">
### Test your knowledge

What is an "embedded SPA"?

    <MultipleChoice>
      <Option>
         A pattern that lets you move an existing project to Astro.
      </Option>
      <Option>
        An "island" of interactivity on an otherwise static page.
      </Option>
      <Option>
        A way to include a full app inside a website along with other features, such as a blog or docs.
      </Option>
      <Option isCorrect>
         All of the above!
      </Option>
    </MultipleChoice>

</Box>


## 1. Create a new Astro project

Run the following command in your terminal to start our handy install wizard:

<PackageManagerTabs>
  <Fragment slot="npm">
  ```shell
  # create a new project with npm
  npm create astro@latest -- --template basics
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```shell
  # create a new project with pnpm
  pnpm create astro@latest --template basics
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```shell
  # create a new project with yarn
  yarn create astro --template basics
  ```
  </Fragment>
</PackageManagerTabs>

## 2. Add dependencies

Your React app requires the `@astrojs/react` inegration to render React components. Run the `astro add` command using the package manager of your choice and our automatic integration wizard will update your configuration file and install any necessary dependencies.

<PackageManagerTabs>
  <Fragment slot="npm">
  ```shell
  npx astro add react
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```shell
  pnpm astro add react
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```shell
  yarn astro add react
  ```
  </Fragment>
</PackageManagerTabs>

Additionally, the Remix Run starter with React Router requires `react-router-dom`. You must also install this from the command line.

<PackageManagerTabs>
  <Fragment slot="npm">
  ```shell
  npm install react-router-dom
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```shell
  pnpm install react-router-dom
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```shell
  yarn add react-router-dom
  ```
  </Fragment>
</PackageManagerTabs>


## 3. Copy your App files into Astro

The basic structure of the [Remix Run basic React Router Example](https://github.com/remix-run/react-router/tree/dev/examples) is some source files and an `index.html` as an entry page.

<FileTree>
- **src/**
  - **App.jsx**
  - **index.css**
  - **main.tsx**
  - vite-env.d.ts
- README.md
- index.html
- package-lock.json
- package.json
- tsconfig.json
- vite.config.ts
</FileTree>

Rename the `src` directory to `cra`. These files are the only ones needed to run your embedded SPA. Copy this directory into the `src/` folder of your Astro project. It is safe to delete `vite-env.d.ts`.

Your Astro project should now have the following files and folders:

<FileTree>
- public/
  - favicon.svg
- src/
  - cra/
    - App.jsx
    - index.css
    - main.tsx
  - pages/
    - index.astro
  - env.d.ts
- astro.config.mjs
- package-lock.json
- package.json
- tsconfig.json
</FileTree>

## 4. Render your SPA as a component

In the React Router project, `index.html` ran `main.tsx` as a `<script>` to render the App.

Astro can render React components directly, so instead of running `main.tsx` as a script, convert it to a default exported function and render`<Main />` directly in your Astro template.

```js title="src/cra/main.tsx" ins={7,8,16,17}
// import * as React from "react";
// import * as ReactDOM from "react-dom/client";
import { BrowserRouter } from "react-router-dom";
import "./index.css";
import App from "./App";

export default function Main(){
  return(
// ReactDOM.createRoot(document.getElementById("root")!).render(
  // <React.StrictMode>
      <BrowserRouter>
        <App />
      </BrowserRouter>
  // </React.StrictMode>
// );
  );
}
```

Now, import and render `<Main />` as a component in `src/pages/index.astro`.

```astro title="src/pages/index.astro" ins={2,15}
---
import Main from "../cra/main.tsx"
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>Astro</title>
	</head>
	<body>
		<h1>Astro</h1>
		<Main client:only="react"/> 
	</body>
</html>
```

And that's it!
